<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CATÁLOGO DE PRODUTOS</title>
</head>
<body>
    <script >
        class Produto {
            constructor(nome, preco, descricao) {
                this.nome = nome;
                this.preco = preco;
                this.descricao = descricao;
            }
        }

        //adicionar um novo produto ao catálogo
        function adicionarProduto() {
            var nome = prompt("Digite o nome do produto:");
            var preco = parseFloat(prompt("Digite o preço do produto:"));
            var descricao = prompt("Digite a descrição do produto:");
  
            var produtoNovo = new Produto(nome, preco, descricao);
            catalogo.push(produtoNovo);
            alert("Produto adicionado com sucesso!");
        }

        //buscar um produto pelo nome.
        function buscarProduto() {
            var nomeBusca = prompt("Digite o nome do produto que deseja buscar:");
            catalogo.forEach(produto =>{
                if (produto.nome == nomeBusca) {
                    alert("Nome: " + produto.nome + "\n" + "Preço: " + produto.preco + "\n" + "Descrição: " + produto.descricao + "\n");
                } else {
                    alert("Produto não encontrado!");
                }
            })
        }

        //atualizar um produto.
        function atualizarProduto() {
            var nomeBusca = prompt("Digite o nome do produto que deseja atualizar:");
            var produtoEncontradoIndex = catalogo.findIndex(produto => produto.nome === nomeBusca);

            if (produtoEncontradoIndex !== -1) {
                var novoNome = prompt("Digite o novo nome do produto (se necessário): ");
                var novoPreco = parseFloat(prompt("Digite o novo preço do produto: "));
                var novaDescricao = prompt("Digite a nova descrição do produto: ");

            // Atualizar os valores do produto encontrado
                catalogo[produtoEncontradoIndex].nome = novoNome !== "" ? novoNome : catalogo[produtoEncontradoIndex].nome;
                catalogo[produtoEncontradoIndex].preco = novoPreco;
                catalogo[produtoEncontradoIndex].descricao = novaDescricao;

                alert("Produto atualizado com sucesso!");
            } else {
                alert("Produto não encontrado!");
            }
        }


        //exibir todos os produtos do catálogo.
        function visualizarTodos() {
            if (catalogo.length === 0) {
                alert("O catálogo de produtos está vazio. Não há nenhum produto para ser exibido.");
                return;
            }
            var texto = [];

            alert("----------------- Catálogo de Produtos da Loja ----------------" + "\n" + "Veja a seguir o catálogo de produtos! Pressione OK para seguir vendo cada produto dentro do catálogo.");
            catalogo.forEach(produto => {
            texto = (texto + "Nome: " + produto.nome + "\n" + "Preço: " + produto.preco +"\n" + "Descrição: " + produto.descricao + "\n" + "------------------------" + "\n");
            });

            alert(texto);
        }

        //remover um produto.
        function removerProduto() {
            var nomeBusca = prompt("Digite o nome do produto que deseja remover:");
            var produtoExcluir = catalogo.findIndex(produto => produto.nome === nomeBusca);
  
            if (produtoExcluir !== -1) {
                catalogo.splice(produtoExcluir, 1);
                alert("Produto removido com sucesso!");
            } else {
                alert("Produto não encontrado!");
            }
        }


        function main() {
            var opcao;
            var menu;

            do {
                const menu = [
                    alert("----- Menu de Opções -----\n 1 - Adicionar Produto \n 2 - Buscar Produto \n 3 - Atualizar Produto \n 4 - Visualizar Todos os Produtos \n 5 - Remover Produto \n 6 - Sair \n")
                ];
                opcao = parseInt(prompt("Escolha uma opção:"));
    
                switch (opcao) {
                    case 1:
                        adicionarProduto();
                        break;
                    case 2:
                        buscarProduto();
                        break;
                    case 3:
                        atualizarProduto();
                        break;
                    case 4:
                        visualizarTodos();
                        break;
                    case 5:
                        removerProduto();
                        break;
                    case 6:
                        alert("Saindo do catálogo de produtos...");
                        break;
                    default:
                        alert("Opção inválida. Tente novamente.");
                }
            } while (opcao !== 6);
        }
        
        // Array para armazenar os produtos
        var catalogo = [];

        // Chamando a função principal
        main();
    </script>
</body>
</html>